<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout - JM Farma</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <style>
    body {
      background-color: #f8f9fa;
    }

    h1, h5 {
      color: #06165c;
      font-weight: bold;
    }

    .btn-primary {
      background-color: #153564;
      border: none;
    }

    .btn-primary:hover {
      background-color: #0b5ed7;
    }

    .card {
      border-radius: 0.75rem;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }

    header {
      background-color: #06165c;
    }

    .logo-title {
      text-decoration: none;
      color: white;
    }

    .logo-title:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <!-- CabeÃ§alho com logo e tÃ­tulo -->
  <header class="py-4 mb-4 shadow-sm">
    <div class="container text-center">
      <a href="index.html" class="d-inline-flex align-items-center justify-content-center logo-title">
        <img src="./imagens/Imagem do WhatsApp de 2025-06-17 Ã (s) 15.19.41_262e9b74.jpg" alt="Logo da FarmÃ¡cia" height="60" class="me-3">
        <h2 class="mb-0 fw-bold">JM Farma</h2>
      </a>
    </div>
  </header>

  <!-- ConteÃºdo principal -->
  <div class="container py-4">
    <h1 class="text-center mb-4">ðŸ›’ Checkout de Compra</h1>

    <form id="checkout-form" class="mb-4">
      <div class="mb-3">
        <label for="clienteNome" class="form-label">Nome do Cliente</label>
        <input type="text" id="clienteNome" class="form-control" placeholder="Digite o nome" required>
      </div>

      <h5 class="mt-4">Produtos:</h5>

      <div class="row">
        <div class="col-md-3 mb-3">
          <label for="Paracetamol" class="form-label">Paracetamol</label>
          <input type="number" id="Paracetamol" class="form-control" value="0" min="0">
        </div>
        <div class="col-md-3 mb-3">
          <label for="Dipirona" class="form-label">Dipirona</label>
          <input type="number" id="Dipirona" class="form-control" value="0" min="0">
        </div>
        <div class="col-md-3 mb-3">
          <label for="Ibuprofeno" class="form-label">Ibuprofeno</label>
          <input type="number" id="Ibuprofeno" class="form-control" value="0" min="0">
        </div>
        <div class="col-md-3 mb-3">
          <label for="Amoxicilina" class="form-label">Amoxicilina</label>
          <input type="number" id="Amoxicilina" class="form-control" value="0" min="0">
        </div>
        <div class="col-md-3 mb-3">
          <label for="Outros" class="form-label">Outros</label>
          <input type="number" id="Outros" class="form-control" value="0" min="0">
        </div>
      </div>

      <button type="submit" class="btn btn-primary mt-3">Finalizar Compra</button>
    </form>

    <div class="card">
      <div class="card-header bg-light">
        Resumo da Compra
      </div>
      <div class="card-body">
        <h5 class="card-title" id="resumo-cliente">Cliente: </h5>
        <p class="card-text" id="resumo-produtos">Nenhum produto selecionado.</p>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById("checkout-form");
    const nomeInput = document.getElementById("clienteNome");
    const resumoCliente = document.getElementById("resumo-cliente");
    const resumoProdutos = document.getElementById("resumo-produtos");

    const clienteSalvo = JSON.parse(localStorage.getItem("clienteSelecionado"));

    if (clienteSalvo) {
      nomeInput.value = clienteSalvo.nome;
      resumoCliente.textContent = "Cliente: " + clienteSalvo.nome;

      for (let produto in clienteSalvo.produtos) {
        if (document.getElementById(produto)) {
          document.getElementById(produto).value = clienteSalvo.produtos[produto];
        }
      }

      atualizarResumo();
    }

    function atualizarResumo() {
      const produtos = ["Paracetamol", "Dipirona", "Ibuprofeno", "Amoxicilina", "Outros"];
      const lista = [];

      produtos.forEach(produto => {
        const qtd = parseInt(document.getElementById(produto).value);
        if (qtd > 0) {
          lista.push(`${qtd}x ${produto}`);
        }
      });

      resumoProdutos.textContent = lista.length > 0 ? lista.join(", ") : "Nenhum produto selecionado.";
    }

    document.querySelectorAll("input[type=number]").forEach(input => {
      input.addEventListener("input", atualizarResumo);
    });

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      alert("Compra finalizada com sucesso para " + nomeInput.value + "!");
      localStorage.removeItem("clienteSelecionado");
      form.reset();
      atualizarResumo();
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>